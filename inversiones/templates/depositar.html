{% extends 'base.html' %}
{% block title %}DepÃ³sito{% endblock %}

{% block content %}
<div class="deposit-container">
  <div class="deposit-card active">
    <h2>ğŸ’° Balance Disponible</h2>
    <p class="amount">$ 0.00</p>
    <button class="next-btn" onclick="showStep(2)">Siguiente</button>
  </div>

  <div class="deposit-card">
    <h2>ğŸ”— Copia tu enlace de depÃ³sito</h2>
    <input type="text" id="depositLink" class="form-control" value="https://plataforma.com/depositar/usuario123" readonly>
    <button onclick="copiarEnlace()" class="copy-btn">ğŸ“‹ Copiar Enlace</button>
    <button class="next-btn" onclick="showStep(3)">Siguiente</button>
  </div>

  <div class="deposit-card">
    <h2>ğŸ“· Cargar captura de pago</h2>
    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}
      {{ form.as_p }}
      <button type="submit" class="send-btn">Enviar Solicitud</button>
    </form>
  </div>

  <div class="deposit-card">
    <h2>ğŸ“œ Historial de Procesamiento</h2>
    <p>ğŸ“… 16/07/2025 - Solicitud enviada</p>
    <p>ğŸ” 17/07/2025 - En revisiÃ³n</p>
    <button class="next-btn" onclick="showStep(5)">Siguiente</button>
  </div>

  <div class="deposit-card">
    <h2>ğŸ“¢ Estado de tu DepÃ³sito</h2>
    <p>âœ… DepÃ³sito completado con Ã©xito</p>
  </div>
</div>

<script>
function copiarEnlace() {
  const enlace = document.getElementById("depositLink");
  enlace.select();
  enlace.setSelectionRange(0, 99999); // mÃ³viles
  document.execCommand("copy");
  alert("Â¡Enlace copiado!");
}

function showStep(step) {
  const steps = document.querySelectorAll('.deposit-card');
  steps.forEach((el, i) => {
    el.classList.toggle('active', i === step - 1);
  });
}
</script>

<style>
.deposit-card { display: none; }
.deposit-card.active { display: block; }
/* Agrega aquÃ­ estilos para recuadros, animaciones, etc. */
</style>

{% endblock %}
{% if form_enviado %}
<script>
  // Ir automÃ¡ticamente al paso 4 (Historial de Procesamiento)
  document.addEventListener("DOMContentLoaded", function() {
    showStep(4);
  });
</script>
{% endif %}
